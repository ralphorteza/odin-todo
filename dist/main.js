(()=>{"use strict";class t{constructor(t){this.name=t,this.tasks=[]}setName(t){this.name=t}getName(){return this.name}setTasks(t){this.tasks=t}getTasks(){return this.tasks}getTask(t){return this.task.find((e=>e.getName()===t))}contains(t){return this.tasks.some((e=>e.getName()===t))}addTask(t){this.tasks.find((e=>e.getName()===t.name))||this.tasks.push(t)}deleteTask(t){this.tasks=this.tasks.fileter((e=>e.name!==t))}}class e{constructor(t,e="No Date"){this.name=t,this.dueDate=e}setName(t){this.name=t}getName(){return this.name}setDate(t){this.dueDate=t}getDate(){return this.dueDate}getDateFormatted(){const t=this.dueDate.split("/")[0];return`${this.dueDate.split("/")[1]}/${t}/${this.dueDate.split("/")[2]}`}}class s{constructor(){this.projects=[],this.projects.push(new t("Inbox"))}setProjects(t){this.projects=t}getProjects(){return this.projects}getProject(t){return this.projects.find((e=>e.getName()===t))}contains(t){return this.projects.some((e=>e.getName()===t))}addProject(t){this.projects.find((e=>e.name===t))||this.projects.push(t)}deleteProject(t){const e=this.projects.find((e=>e.getName()===t));this.projects.splice(this.projects.indexOf(e),1)}}class o{static saveToDoList(t){localStorage.setItem("toDoList",JSON.stringify(t))}static getToDoList(){const o=Object.assign(new s,JSON.parse(localStorage.getItem("toDoList")));return o.setProjects(o.getProjects().map((e=>Object.assign(new t,e)))),o.getProjects().forEach((t=>{t.setTasks(t.getTasks().map((t=>Object.assign(new e,t))))})),o}static addProject(t){const e=o.getToDoList();e.addProject(t),o.saveToDoList(e)}static deleteProject(t){const e=o.getToDoList();e.deleteProject(t),o.saveToDoList(e)}static addTask(t,e){const s=o.getToDoList();s.getProject(t).addTask(e),o.saveToDoList(s)}static deleteTask(t,e){const s=o.getToDoList();s.getProject(t).deleteTask(e),o.saveToDoList(s)}static renameTask(t,e,s){const c=o.getToDoList();c.getProject(t).getTask(e).setName(s),o.saveToDoList(c)}static setTaskDate(t,e,s){o.getToDoList().getProject(t).getTask(e).setDate(s)}}class c{static loadPage(){c.form(),c.initAddProjectButtons(),c.openProject("Inbox",document.getElementById("button-inbox-projects"))}static openProject(t,e){[...document.querySelectorAll(".button-default-project"),...document.querySelectorAll(".button-project")].forEach((t=>t.classList.remove("active"))),e.classList.add("active"),c.closeAddProjectPopup(),c.loadProjectContent(t)}static loadTasks(t){o.getToDoList().getProject(t).getTasks().forEach((t=>c.createTask(t.name,t.dueDate)))}static loadProjectContent(t){const e=document.querySelector("#project-preview"),s=document.createElement("h1");s.setAttribute("id","project-name"),s.textContent=t;const o=document.createElement("div");o.setAttribute("id","tasks-list"),e.append(s),e.append(o),c.loadTasks(t)}static loadProjects(){o.getToDoList().getProjects().forEach((t=>{"Inbox"!==t.name&&c.createProject(t.name)})),c.initAddProjectButtons()}static initAddProjectButtons(){const t=document.querySelector("#button-add-project"),e=document.querySelector("#button-add-project-popup"),s=document.querySelector("#button-cancel-project-popup"),o=document.querySelector("#input-add-project-popup");t.addEventListener("click",c.openAddProjectPopup),e.addEventListener("click",c.addProject),s.addEventListener("click",c.closeAddProjectPopup),o.addEventListener("keypress",c.handleAddProjectInput)}static openAddProjectPopup(){const t=document.querySelector("#add-project-popup"),e=document.querySelector("#button-add-project");t.classList.add("active"),e.classList.add("active")}static closeAddProjectPopup(){const t=document.querySelector("#add-project-popup"),e=document.querySelector("#button-add-project"),s=document.querySelector("#input-add-project-popup");t.classList.remove("active"),e.classList.remove("active"),s.value=""}static handleAddProjectInput(t){"Enter"===t.key&&c.addProject()}static addProject(){const e=document.getElementById("input-add-project-popup"),s=e.value;if(""!==s){if(o.getToDoList().contains(s))return e.value="",void alert("project name must be different");o.addProject(new t(s)),c.createProject(s),c.closeAddProjectPopup()}else alert("project name can't be empty")}static createProject(){}static makeProject(){}static createTask(t,e){const s=document.querySelector("#tasks-list"),o=document.createElement("div"),c=document.createElement("input"),a=document.createElement("div"),r=document.createElement("div"),n=document.createElement("button"),d=document.createElement("button");o.classList.add("task"),a.classList.add("task-name"),r.classList.add("date"),n.classList.add("edit"),d.classList.add("delete"),c.setAttribute("type","checkbox"),a.textContent=t,r.textContent=e,n.textContent="edit",d.textContent="delete",o.append(c),o.append(a),o.append(r),o.append(n),o.append(d),s.append(o)}static openForm(){document.querySelector("#add-task").addEventListener("click",(()=>{document.querySelector("#form-container").classList.add("active"),document.querySelector("#overlay").classList.add("active")}))}static cancelForm(){document.querySelector("#cancel-task").addEventListener("click",(()=>{document.querySelector("#form-container").classList.remove("active"),document.querySelector("#overlay").classList.remove("active")}))}static form(){c.openForm(),c.submitTask(),c.cancelForm()}static submitTask(){document.querySelector("#form").addEventListener("submit",(t=>{t.preventDefault();const s=document.querySelector("#project-name").textContent,a=document.querySelector("#task-title").value,r=document.querySelector("#task-date").value;o.addTask(s,new e(a,r)),c.createTask(a,r)}))}}document.addEventListener("DOMContentLoaded",c.loadPage)})();